{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar react = require('react');\n\nvar proxyCompare = require('proxy-compare');\n\nvar vanilla = require('valtio/vanilla');\n\nvar TARGET = '_uMS_T';\nvar GET_VERSION = '_uMS_V';\n\nvar createMutableSource = function createMutableSource(target, getVersion) {\n  var _ref;\n\n  return _ref = {}, _ref[TARGET] = target, _ref[GET_VERSION] = getVersion, _ref;\n};\n\nvar useMutableSource = function useMutableSource(source, getSnapshot, subscribe) {\n  var lastVersion = react.useRef();\n  var currentVersion = source[GET_VERSION](source[TARGET]);\n\n  var _useState = react.useState(function () {\n    return [source, getSnapshot, subscribe, currentVersion, getSnapshot(source[TARGET])];\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var currentSnapshot = state[4];\n\n  if (state[0] !== source || state[1] !== getSnapshot || state[2] !== subscribe) {\n    currentSnapshot = getSnapshot(source[TARGET]);\n    setState([source, getSnapshot, subscribe, currentVersion, currentSnapshot]);\n  } else if (currentVersion !== state[3] && currentVersion !== lastVersion.current) {\n    currentSnapshot = getSnapshot(source[TARGET]);\n\n    if (!Object.is(currentSnapshot, state[4])) {\n      setState([source, getSnapshot, subscribe, currentVersion, currentSnapshot]);\n    }\n  }\n\n  react.useEffect(function () {\n    var didUnsubscribe = false;\n\n    var checkForUpdates = function checkForUpdates() {\n      if (didUnsubscribe) {\n        return;\n      }\n\n      try {\n        var nextSnapshot = getSnapshot(source[TARGET]);\n        var nextVersion = source[GET_VERSION](source[TARGET]);\n        lastVersion.current = nextVersion;\n        setState(function (prev) {\n          if (prev[0] !== source || prev[1] !== getSnapshot || prev[2] !== subscribe) {\n            return prev;\n          }\n\n          if (Object.is(prev[4], nextSnapshot)) {\n            return prev;\n          }\n\n          return [prev[0], prev[1], prev[2], nextVersion, nextSnapshot];\n        });\n      } catch (e) {\n        setState(function (prev) {\n          return [].concat(prev);\n        });\n      }\n    };\n\n    var unsubscribe = subscribe(source[TARGET], checkForUpdates);\n    checkForUpdates();\n    return function () {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [source, getSnapshot, subscribe]);\n  return currentSnapshot;\n};\n\nvar isSSR = typeof window === 'undefined' || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nvar useIsomorphicLayoutEffect = isSSR ? react.useEffect : react.useLayoutEffect;\n\nvar useAffectedDebugValue = function useAffectedDebugValue(state, affected) {\n  var pathList = react.useRef();\n  react.useEffect(function () {\n    pathList.current = proxyCompare.affectedToPathList(state, affected);\n  });\n  react.useDebugValue(pathList.current);\n};\n\nvar mutableSourceCache = new WeakMap();\n\nvar getMutableSource = function getMutableSource(proxyObject) {\n  if (!mutableSourceCache.has(proxyObject)) {\n    mutableSourceCache.set(proxyObject, createMutableSource(proxyObject, vanilla.getVersion));\n  }\n\n  return mutableSourceCache.get(proxyObject);\n};\n\nvar useSnapshot = function useSnapshot(proxyObject, options) {\n  var forceUpdate = react.useReducer(function (c) {\n    return c + 1;\n  }, 0)[1];\n  var affected = new WeakMap();\n  var lastAffected = react.useRef();\n  var prevSnapshot = react.useRef();\n  var lastSnapshot = react.useRef();\n  useIsomorphicLayoutEffect(function () {\n    lastSnapshot.current = prevSnapshot.current = vanilla.snapshot(proxyObject);\n  }, [proxyObject]);\n  useIsomorphicLayoutEffect(function () {\n    lastAffected.current = affected;\n\n    if (prevSnapshot.current !== lastSnapshot.current && proxyCompare.isChanged(prevSnapshot.current, lastSnapshot.current, affected, new WeakMap())) {\n      prevSnapshot.current = lastSnapshot.current;\n      forceUpdate();\n    }\n  });\n  var notifyInSync = options == null ? void 0 : options.sync;\n  var sub = react.useCallback(function (proxyObject, cb) {\n    return vanilla.subscribe(proxyObject, function () {\n      var nextSnapshot = vanilla.snapshot(proxyObject);\n      lastSnapshot.current = nextSnapshot;\n\n      try {\n        if (lastAffected.current && !proxyCompare.isChanged(prevSnapshot.current, nextSnapshot, lastAffected.current, new WeakMap())) {\n          return;\n        }\n      } catch (e) {}\n\n      prevSnapshot.current = nextSnapshot;\n      cb();\n    }, notifyInSync);\n  }, [notifyInSync]);\n  var currSnapshot = useMutableSource(getMutableSource(proxyObject), vanilla.snapshot, sub);\n\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production') {\n    useAffectedDebugValue(currSnapshot, affected);\n  }\n\n  var proxyCache = react.useMemo(function () {\n    return new WeakMap();\n  }, []);\n  return proxyCompare.createProxy(currSnapshot, affected, proxyCache);\n};\n\nObject.defineProperty(exports, 'getVersion', {\n  enumerable: true,\n  get: function () {\n    return vanilla.getVersion;\n  }\n});\nObject.defineProperty(exports, 'proxy', {\n  enumerable: true,\n  get: function () {\n    return vanilla.proxy;\n  }\n});\nObject.defineProperty(exports, 'ref', {\n  enumerable: true,\n  get: function () {\n    return vanilla.ref;\n  }\n});\nObject.defineProperty(exports, 'snapshot', {\n  enumerable: true,\n  get: function () {\n    return vanilla.snapshot;\n  }\n});\nObject.defineProperty(exports, 'subscribe', {\n  enumerable: true,\n  get: function () {\n    return vanilla.subscribe;\n  }\n});\nexports.useSnapshot = useSnapshot;","map":{"version":3,"sources":["F:/Project/tshirt/node_modules/valtio/index.js"],"names":["Object","defineProperty","exports","value","react","require","proxyCompare","vanilla","TARGET","GET_VERSION","createMutableSource","target","getVersion","_ref","useMutableSource","source","getSnapshot","subscribe","lastVersion","useRef","currentVersion","_useState","useState","state","setState","currentSnapshot","current","is","useEffect","didUnsubscribe","checkForUpdates","nextSnapshot","nextVersion","prev","e","concat","unsubscribe","isSSR","window","navigator","test","userAgent","useIsomorphicLayoutEffect","useLayoutEffect","useAffectedDebugValue","affected","pathList","affectedToPathList","useDebugValue","mutableSourceCache","WeakMap","getMutableSource","proxyObject","has","set","get","useSnapshot","options","forceUpdate","useReducer","c","lastAffected","prevSnapshot","lastSnapshot","snapshot","isChanged","notifyInSync","sync","sub","useCallback","cb","currSnapshot","process","env","NODE_ENV","proxyCache","useMemo","createProxy","enumerable","proxy","ref"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,gBAAD,CAArB;;AAEA,IAAIG,MAAM,GAAG,QAAb;AACA,IAAIC,WAAW,GAAG,QAAlB;;AACA,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6BC,MAA7B,EAAqCC,UAArC,EAAiD;AACzE,MAAIC,IAAJ;;AAEA,SAAOA,IAAI,GAAG,EAAP,EAAWA,IAAI,CAACL,MAAD,CAAJ,GAAeG,MAA1B,EAAkCE,IAAI,CAACJ,WAAD,CAAJ,GAAoBG,UAAtD,EAAkEC,IAAzE;AACD,CAJD;;AAKA,IAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,MAA1B,EAAkCC,WAAlC,EAA+CC,SAA/C,EAA0D;AAC/E,MAAIC,WAAW,GAAGd,KAAK,CAACe,MAAN,EAAlB;AACA,MAAIC,cAAc,GAAGL,MAAM,CAACN,WAAD,CAAN,CAAoBM,MAAM,CAACP,MAAD,CAA1B,CAArB;;AAEA,MAAIa,SAAS,GAAGjB,KAAK,CAACkB,QAAN,CAAe,YAAY;AACzC,WAAO,CAACP,MAAD,EAASC,WAAT,EAAsBC,SAAtB,EAAiCG,cAAjC,EAAiDJ,WAAW,CAACD,MAAM,CAACP,MAAD,CAAP,CAA5D,CAAP;AACD,GAFe,CAAhB;AAAA,MAGIe,KAAK,GAAGF,SAAS,CAAC,CAAD,CAHrB;AAAA,MAIIG,QAAQ,GAAGH,SAAS,CAAC,CAAD,CAJxB;;AAMA,MAAII,eAAe,GAAGF,KAAK,CAAC,CAAD,CAA3B;;AAEA,MAAIA,KAAK,CAAC,CAAD,CAAL,KAAaR,MAAb,IAAuBQ,KAAK,CAAC,CAAD,CAAL,KAAaP,WAApC,IAAmDO,KAAK,CAAC,CAAD,CAAL,KAAaN,SAApE,EAA+E;AAC7EQ,IAAAA,eAAe,GAAGT,WAAW,CAACD,MAAM,CAACP,MAAD,CAAP,CAA7B;AACAgB,IAAAA,QAAQ,CAAC,CAACT,MAAD,EAASC,WAAT,EAAsBC,SAAtB,EAAiCG,cAAjC,EAAiDK,eAAjD,CAAD,CAAR;AACD,GAHD,MAGO,IAAIL,cAAc,KAAKG,KAAK,CAAC,CAAD,CAAxB,IAA+BH,cAAc,KAAKF,WAAW,CAACQ,OAAlE,EAA2E;AAChFD,IAAAA,eAAe,GAAGT,WAAW,CAACD,MAAM,CAACP,MAAD,CAAP,CAA7B;;AAEA,QAAI,CAACR,MAAM,CAAC2B,EAAP,CAAUF,eAAV,EAA2BF,KAAK,CAAC,CAAD,CAAhC,CAAL,EAA2C;AACzCC,MAAAA,QAAQ,CAAC,CAACT,MAAD,EAASC,WAAT,EAAsBC,SAAtB,EAAiCG,cAAjC,EAAiDK,eAAjD,CAAD,CAAR;AACD;AACF;;AAEDrB,EAAAA,KAAK,CAACwB,SAAN,CAAgB,YAAY;AAC1B,QAAIC,cAAc,GAAG,KAArB;;AAEA,QAAIC,eAAe,GAAG,SAASA,eAAT,GAA2B;AAC/C,UAAID,cAAJ,EAAoB;AAClB;AACD;;AAED,UAAI;AACF,YAAIE,YAAY,GAAGf,WAAW,CAACD,MAAM,CAACP,MAAD,CAAP,CAA9B;AACA,YAAIwB,WAAW,GAAGjB,MAAM,CAACN,WAAD,CAAN,CAAoBM,MAAM,CAACP,MAAD,CAA1B,CAAlB;AACAU,QAAAA,WAAW,CAACQ,OAAZ,GAAsBM,WAAtB;AACAR,QAAAA,QAAQ,CAAC,UAAUS,IAAV,EAAgB;AACvB,cAAIA,IAAI,CAAC,CAAD,CAAJ,KAAYlB,MAAZ,IAAsBkB,IAAI,CAAC,CAAD,CAAJ,KAAYjB,WAAlC,IAAiDiB,IAAI,CAAC,CAAD,CAAJ,KAAYhB,SAAjE,EAA4E;AAC1E,mBAAOgB,IAAP;AACD;;AAED,cAAIjC,MAAM,CAAC2B,EAAP,CAAUM,IAAI,CAAC,CAAD,CAAd,EAAmBF,YAAnB,CAAJ,EAAsC;AACpC,mBAAOE,IAAP;AACD;;AAED,iBAAO,CAACA,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,EAA4BD,WAA5B,EAAyCD,YAAzC,CAAP;AACD,SAVO,CAAR;AAWD,OAfD,CAeE,OAAOG,CAAP,EAAU;AACVV,QAAAA,QAAQ,CAAC,UAAUS,IAAV,EAAgB;AACvB,iBAAO,GAAGE,MAAH,CAAUF,IAAV,CAAP;AACD,SAFO,CAAR;AAGD;AACF,KAzBD;;AA2BA,QAAIG,WAAW,GAAGnB,SAAS,CAACF,MAAM,CAACP,MAAD,CAAP,EAAiBsB,eAAjB,CAA3B;AACAA,IAAAA,eAAe;AACf,WAAO,YAAY;AACjBD,MAAAA,cAAc,GAAG,IAAjB;AACAO,MAAAA,WAAW;AACZ,KAHD;AAID,GApCD,EAoCG,CAACrB,MAAD,EAASC,WAAT,EAAsBC,SAAtB,CApCH;AAqCA,SAAOQ,eAAP;AACD,CA7DD;;AA+DA,IAAIY,KAAK,GAAG,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,CAACA,MAAM,CAACC,SAAzC,IAAsD,8BAA8BC,IAA9B,CAAmCF,MAAM,CAACC,SAAP,CAAiBE,SAApD,CAAlE;AACA,IAAIC,yBAAyB,GAAGL,KAAK,GAAGjC,KAAK,CAACwB,SAAT,GAAqBxB,KAAK,CAACuC,eAAhE;;AAEA,IAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BrB,KAA/B,EAAsCsB,QAAtC,EAAgD;AAC1E,MAAIC,QAAQ,GAAG1C,KAAK,CAACe,MAAN,EAAf;AACAf,EAAAA,KAAK,CAACwB,SAAN,CAAgB,YAAY;AAC1BkB,IAAAA,QAAQ,CAACpB,OAAT,GAAmBpB,YAAY,CAACyC,kBAAb,CAAgCxB,KAAhC,EAAuCsB,QAAvC,CAAnB;AACD,GAFD;AAGAzC,EAAAA,KAAK,CAAC4C,aAAN,CAAoBF,QAAQ,CAACpB,OAA7B;AACD,CAND;;AAQA,IAAIuB,kBAAkB,GAAG,IAAIC,OAAJ,EAAzB;;AAEA,IAAIC,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,WAA1B,EAAuC;AAE5D,MAAI,CAACH,kBAAkB,CAACI,GAAnB,CAAuBD,WAAvB,CAAL,EAA0C;AACxCH,IAAAA,kBAAkB,CAACK,GAAnB,CAAuBF,WAAvB,EAAoC1C,mBAAmB,CAAC0C,WAAD,EAAc7C,OAAO,CAACK,UAAtB,CAAvD;AACD;;AAED,SAAOqC,kBAAkB,CAACM,GAAnB,CAAuBH,WAAvB,CAAP;AACD,CAPD;;AASA,IAAII,WAAW,GAAG,SAASA,WAAT,CAAqBJ,WAArB,EAAkCK,OAAlC,EAA2C;AAC3D,MAAIC,WAAW,GAAGtD,KAAK,CAACuD,UAAN,CAAiB,UAAUC,CAAV,EAAa;AAC9C,WAAOA,CAAC,GAAG,CAAX;AACD,GAFiB,EAEf,CAFe,EAEZ,CAFY,CAAlB;AAGA,MAAIf,QAAQ,GAAG,IAAIK,OAAJ,EAAf;AACA,MAAIW,YAAY,GAAGzD,KAAK,CAACe,MAAN,EAAnB;AACA,MAAI2C,YAAY,GAAG1D,KAAK,CAACe,MAAN,EAAnB;AACA,MAAI4C,YAAY,GAAG3D,KAAK,CAACe,MAAN,EAAnB;AACAuB,EAAAA,yBAAyB,CAAC,YAAY;AACpCqB,IAAAA,YAAY,CAACrC,OAAb,GAAuBoC,YAAY,CAACpC,OAAb,GAAuBnB,OAAO,CAACyD,QAAR,CAAiBZ,WAAjB,CAA9C;AACD,GAFwB,EAEtB,CAACA,WAAD,CAFsB,CAAzB;AAGAV,EAAAA,yBAAyB,CAAC,YAAY;AACpCmB,IAAAA,YAAY,CAACnC,OAAb,GAAuBmB,QAAvB;;AAEA,QAAIiB,YAAY,CAACpC,OAAb,KAAyBqC,YAAY,CAACrC,OAAtC,IAAiDpB,YAAY,CAAC2D,SAAb,CAAuBH,YAAY,CAACpC,OAApC,EAA6CqC,YAAY,CAACrC,OAA1D,EAAmEmB,QAAnE,EAA6E,IAAIK,OAAJ,EAA7E,CAArD,EAAkJ;AAChJY,MAAAA,YAAY,CAACpC,OAAb,GAAuBqC,YAAY,CAACrC,OAApC;AACAgC,MAAAA,WAAW;AACZ;AACF,GAPwB,CAAzB;AAQA,MAAIQ,YAAY,GAAGT,OAAO,IAAI,IAAX,GAAkB,KAAK,CAAvB,GAA2BA,OAAO,CAACU,IAAtD;AACA,MAAIC,GAAG,GAAGhE,KAAK,CAACiE,WAAN,CAAkB,UAAUjB,WAAV,EAAuBkB,EAAvB,EAA2B;AACrD,WAAO/D,OAAO,CAACU,SAAR,CAAkBmC,WAAlB,EAA+B,YAAY;AAChD,UAAIrB,YAAY,GAAGxB,OAAO,CAACyD,QAAR,CAAiBZ,WAAjB,CAAnB;AACAW,MAAAA,YAAY,CAACrC,OAAb,GAAuBK,YAAvB;;AAEA,UAAI;AACF,YAAI8B,YAAY,CAACnC,OAAb,IAAwB,CAACpB,YAAY,CAAC2D,SAAb,CAAuBH,YAAY,CAACpC,OAApC,EAA6CK,YAA7C,EAA2D8B,YAAY,CAACnC,OAAxE,EAAiF,IAAIwB,OAAJ,EAAjF,CAA7B,EAA8H;AAC5H;AACD;AACF,OAJD,CAIE,OAAOhB,CAAP,EAAU,CAAE;;AAEd4B,MAAAA,YAAY,CAACpC,OAAb,GAAuBK,YAAvB;AACAuC,MAAAA,EAAE;AACH,KAZM,EAYJJ,YAZI,CAAP;AAaD,GAdS,EAcP,CAACA,YAAD,CAdO,CAAV;AAeA,MAAIK,YAAY,GAAGzD,gBAAgB,CAACqC,gBAAgB,CAACC,WAAD,CAAjB,EAAgC7C,OAAO,CAACyD,QAAxC,EAAkDI,GAAlD,CAAnC;;AAEA,MAAI,OAAOI,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA5D,EAA0E;AACxE9B,IAAAA,qBAAqB,CAAC2B,YAAD,EAAe1B,QAAf,CAArB;AACD;;AAED,MAAI8B,UAAU,GAAGvE,KAAK,CAACwE,OAAN,CAAc,YAAY;AACzC,WAAO,IAAI1B,OAAJ,EAAP;AACD,GAFgB,EAEd,EAFc,CAAjB;AAGA,SAAO5C,YAAY,CAACuE,WAAb,CAAyBN,YAAzB,EAAuC1B,QAAvC,EAAiD8B,UAAjD,CAAP;AACD,CA7CD;;AA+CA3E,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C4E,EAAAA,UAAU,EAAE,IAD+B;AAE3CvB,EAAAA,GAAG,EAAE,YAAY;AAAE,WAAOhD,OAAO,CAACK,UAAf;AAA4B;AAFJ,CAA7C;AAIAZ,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,OAA/B,EAAwC;AACtC4E,EAAAA,UAAU,EAAE,IAD0B;AAEtCvB,EAAAA,GAAG,EAAE,YAAY;AAAE,WAAOhD,OAAO,CAACwE,KAAf;AAAuB;AAFJ,CAAxC;AAIA/E,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,KAA/B,EAAsC;AACpC4E,EAAAA,UAAU,EAAE,IADwB;AAEpCvB,EAAAA,GAAG,EAAE,YAAY;AAAE,WAAOhD,OAAO,CAACyE,GAAf;AAAqB;AAFJ,CAAtC;AAIAhF,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,UAA/B,EAA2C;AACzC4E,EAAAA,UAAU,EAAE,IAD6B;AAEzCvB,EAAAA,GAAG,EAAE,YAAY;AAAE,WAAOhD,OAAO,CAACyD,QAAf;AAA0B;AAFJ,CAA3C;AAIAhE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,WAA/B,EAA4C;AAC1C4E,EAAAA,UAAU,EAAE,IAD8B;AAE1CvB,EAAAA,GAAG,EAAE,YAAY;AAAE,WAAOhD,OAAO,CAACU,SAAf;AAA2B;AAFJ,CAA5C;AAIAf,OAAO,CAACsD,WAAR,GAAsBA,WAAtB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar react = require('react');\nvar proxyCompare = require('proxy-compare');\nvar vanilla = require('valtio/vanilla');\n\nvar TARGET = '_uMS_T';\nvar GET_VERSION = '_uMS_V';\nvar createMutableSource = function createMutableSource(target, getVersion) {\n  var _ref;\n\n  return _ref = {}, _ref[TARGET] = target, _ref[GET_VERSION] = getVersion, _ref;\n};\nvar useMutableSource = function useMutableSource(source, getSnapshot, subscribe) {\n  var lastVersion = react.useRef();\n  var currentVersion = source[GET_VERSION](source[TARGET]);\n\n  var _useState = react.useState(function () {\n    return [source, getSnapshot, subscribe, currentVersion, getSnapshot(source[TARGET])];\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var currentSnapshot = state[4];\n\n  if (state[0] !== source || state[1] !== getSnapshot || state[2] !== subscribe) {\n    currentSnapshot = getSnapshot(source[TARGET]);\n    setState([source, getSnapshot, subscribe, currentVersion, currentSnapshot]);\n  } else if (currentVersion !== state[3] && currentVersion !== lastVersion.current) {\n    currentSnapshot = getSnapshot(source[TARGET]);\n\n    if (!Object.is(currentSnapshot, state[4])) {\n      setState([source, getSnapshot, subscribe, currentVersion, currentSnapshot]);\n    }\n  }\n\n  react.useEffect(function () {\n    var didUnsubscribe = false;\n\n    var checkForUpdates = function checkForUpdates() {\n      if (didUnsubscribe) {\n        return;\n      }\n\n      try {\n        var nextSnapshot = getSnapshot(source[TARGET]);\n        var nextVersion = source[GET_VERSION](source[TARGET]);\n        lastVersion.current = nextVersion;\n        setState(function (prev) {\n          if (prev[0] !== source || prev[1] !== getSnapshot || prev[2] !== subscribe) {\n            return prev;\n          }\n\n          if (Object.is(prev[4], nextSnapshot)) {\n            return prev;\n          }\n\n          return [prev[0], prev[1], prev[2], nextVersion, nextSnapshot];\n        });\n      } catch (e) {\n        setState(function (prev) {\n          return [].concat(prev);\n        });\n      }\n    };\n\n    var unsubscribe = subscribe(source[TARGET], checkForUpdates);\n    checkForUpdates();\n    return function () {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [source, getSnapshot, subscribe]);\n  return currentSnapshot;\n};\n\nvar isSSR = typeof window === 'undefined' || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nvar useIsomorphicLayoutEffect = isSSR ? react.useEffect : react.useLayoutEffect;\n\nvar useAffectedDebugValue = function useAffectedDebugValue(state, affected) {\n  var pathList = react.useRef();\n  react.useEffect(function () {\n    pathList.current = proxyCompare.affectedToPathList(state, affected);\n  });\n  react.useDebugValue(pathList.current);\n};\n\nvar mutableSourceCache = new WeakMap();\n\nvar getMutableSource = function getMutableSource(proxyObject) {\n\n  if (!mutableSourceCache.has(proxyObject)) {\n    mutableSourceCache.set(proxyObject, createMutableSource(proxyObject, vanilla.getVersion));\n  }\n\n  return mutableSourceCache.get(proxyObject);\n};\n\nvar useSnapshot = function useSnapshot(proxyObject, options) {\n  var forceUpdate = react.useReducer(function (c) {\n    return c + 1;\n  }, 0)[1];\n  var affected = new WeakMap();\n  var lastAffected = react.useRef();\n  var prevSnapshot = react.useRef();\n  var lastSnapshot = react.useRef();\n  useIsomorphicLayoutEffect(function () {\n    lastSnapshot.current = prevSnapshot.current = vanilla.snapshot(proxyObject);\n  }, [proxyObject]);\n  useIsomorphicLayoutEffect(function () {\n    lastAffected.current = affected;\n\n    if (prevSnapshot.current !== lastSnapshot.current && proxyCompare.isChanged(prevSnapshot.current, lastSnapshot.current, affected, new WeakMap())) {\n      prevSnapshot.current = lastSnapshot.current;\n      forceUpdate();\n    }\n  });\n  var notifyInSync = options == null ? void 0 : options.sync;\n  var sub = react.useCallback(function (proxyObject, cb) {\n    return vanilla.subscribe(proxyObject, function () {\n      var nextSnapshot = vanilla.snapshot(proxyObject);\n      lastSnapshot.current = nextSnapshot;\n\n      try {\n        if (lastAffected.current && !proxyCompare.isChanged(prevSnapshot.current, nextSnapshot, lastAffected.current, new WeakMap())) {\n          return;\n        }\n      } catch (e) {}\n\n      prevSnapshot.current = nextSnapshot;\n      cb();\n    }, notifyInSync);\n  }, [notifyInSync]);\n  var currSnapshot = useMutableSource(getMutableSource(proxyObject), vanilla.snapshot, sub);\n\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production') {\n    useAffectedDebugValue(currSnapshot, affected);\n  }\n\n  var proxyCache = react.useMemo(function () {\n    return new WeakMap();\n  }, []);\n  return proxyCompare.createProxy(currSnapshot, affected, proxyCache);\n};\n\nObject.defineProperty(exports, 'getVersion', {\n  enumerable: true,\n  get: function () { return vanilla.getVersion; }\n});\nObject.defineProperty(exports, 'proxy', {\n  enumerable: true,\n  get: function () { return vanilla.proxy; }\n});\nObject.defineProperty(exports, 'ref', {\n  enumerable: true,\n  get: function () { return vanilla.ref; }\n});\nObject.defineProperty(exports, 'snapshot', {\n  enumerable: true,\n  get: function () { return vanilla.snapshot; }\n});\nObject.defineProperty(exports, 'subscribe', {\n  enumerable: true,\n  get: function () { return vanilla.subscribe; }\n});\nexports.useSnapshot = useSnapshot;\n"]},"metadata":{},"sourceType":"script"}